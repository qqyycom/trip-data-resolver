# Ramer-Douglas-Peucker 轨迹抽稀可视化工具

这是一个基于 Ramer-Douglas-Peucker 算法的轨迹抽稀可视化工具，用于处理 GPS 轨迹数据并展示抽稀前后的轨迹变化。

## 功能需求

### 核心功能

1. **文件上传与解析**

   - 支持拖拽上传 GPS 轨迹数据文件
     - 支持 `.map` 格式
     - 支持 `.zip` 格式文件，解压后包含多个子文件。
   - 解析指定格式的 GPS 数据
   - 数据验证与错误处理

2. **轨迹抽稀处理**

   - 使用 `mourner/simplify-js` 库进行轨迹抽稀
   - 支持实时调整抽稀容差参数
   - 保留原始轨迹数据用于对比

3. **地图可视化**

   - 在 Mapbox 地图上绘制原始轨迹（蓝色）
   - 绘制抽稀后的轨迹（红色）
   - 显示抽稀前后的数据点数量对比
   - 支持地图缩放和平移

4. **交互控制**
   - 容差参数滑块调节（实时预览效果）
   - 显示/隐藏原始轨迹和抽稀轨迹的开关
   - 轨迹统计信息显示

### 技术特性

- 响应式设计，支持桌面和移动端
- 高性能渲染，支持大量轨迹点
- 实时交互，参数调整即时生效

## 数据集

输入的数据格式为：

```
A,220725,033129,2235.1489,N,11357.0225,E,8.54,-0.66,0.42,-0.67;
```

字段说明：

- A: 数据有效标识
- 220725: 日期（日月年）
- 033129: 时间（时分秒）
- 2235.1489,N: 纬度（度分秒格式）
- 11357.0225,E: 经度（度分秒格式）
- 8.54: 速度
- -0.66,0.42,-0.67: 三轴加速度数据

## 技术栈

### 前端框架

- **Next.js 15** (App Router)
- **TypeScript** - 类型安全开发
- **Tailwind CSS** - 响应式样式设计

### 地图可视化

- **Mapbox GL JS** - 高性能地图渲染
- **mapbox-gl** npm 包

### 轨迹处理

- **mourner/simplify-js** - 轨迹抽稀算法实现
- 支持高质量和高性能两种模式

### 开发工具

- **ESLint** + **Prettier** - 代码规范
- **Husky** - Git hooks
- **Vercel** - 部署平台（推荐）

## 实现要求

### 性能优化

- 使用 React 18 的 Concurrent Features
- 实现虚拟化长列表（如果需要显示大量轨迹点）
- 地图瓦片缓存优化
- 轨迹数据分片处理（支持大文件）

### 用户体验

- 拖拽上传反馈动画
- 轨迹处理进度指示器
- 实时参数调整预览
- 移动端触摸手势支持

### 数据处理

- GPS 坐标格式转换（DDMM.MMMM → 十进制度数）
- 异常数据点过滤
- 轨迹点时间序列验证
- 内存使用优化（大文件处理）
